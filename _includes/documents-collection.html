<!-- https://talk.jekyllrb.com/t/collections-dont-order-properly-on-github-pages/4652/2 -->
<!-- I could not get it to work via the sort_by variable in _config.yml, so always sort by order -->
{% assign entries = site[include.collection] | sort: "order" %}

{% if include.sort_by == 'title' %}
  {% if include.sort_order == 'reverse' %}
    {% assign entries = entries | sort: 'title' | reverse %}
  {% else %}
    {% assign entries = entries | sort: 'title' %}
  {% endif %}
{% elsif include.sort_by == 'date' %}
  {% if include.sort_order == 'reverse' %}
    {% assign entries = entries | sort: 'date' | reverse %}
  {% else %}
    {% assign entries = entries | sort: 'date' %}
  {% endif %}

{%- for entry in entries -%}
  {% include entry.html %}
{%- endfor -%}
